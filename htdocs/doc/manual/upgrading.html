<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8"/>
<link rel='alternate' type='application/rss+xml' title='RSS' href='index.xml'/>
<title> Habari - User Manual </title>
<link rel="stylesheet" type="text/css" media="screen" href="style.css">
</head>
<body>
<div id="topMenu">
	<a href="index.html#introduction" title="Introduction">Introduction</a>
	<a href="habari.html" title="About Habari">About Habari</a>
	<a href="new.html" title="What's New">What's New</a>
	<a href="installation.html" title="Installation">Installation</a>
	<a href="upgrading.html" title="Upgrading">Upgrading</a>
	<a href="index.html#userdocumentaion" title="Using Habari">Using Habari</a>
	<a href="developer.html" title="Developer Introduction">Developer Introduction</a>
</div>

<div id="wrapper">

	<div id="upgrading">
		<h1>Upgrading</h1>
<h2>Before You Upgrade</h2>
<p>Before making any major change in your Habari installation, it would be prudent to create a backup of your database and your installation, in particular all the files in your Habari /user directory. The /user directory should contain all files which you have customized - plugins you have installed, themes you have installed, class files you may have modified, or locale files you have installed.
</p>
<h2>The Upgrade Process</h2>

<ol><li> Download the new version of Habari that you will be installing. Unzip it into the location of your choice.
</li><li> Deactivate your active plugins. Some of the system plugins may have been changed. Some of the plugins you got in other places may not be compatible with the new version of Habari.
</li><li> Delete the following directories
<ol><li> /3rdparty
</li><li> /scripts
</li><li> /doc
</li><li> /system
</li></ol>
</li><li> Delete the index.php, LICENSE, and NOTICE files from the root of your installation. Do <b>not</b> delete your config.php file if it is in the root of your Habari installation, or the .htaccess file.

</li><li> Copy the new version of Habari to the same location as the old version.
</li><li> Using your web browser, navigate to your site. If there are any database changes that need to be made, they will be made automatically at this time.
</li><li> Log into your Habari administrative area. Navigate to the plugins page and reactivate the plugins one by one. 
</li><li> Celebrate and enjoy the new features of your latest version of Habari!
</li></ol>
<h3>Upgrading from Version 0.5.2 to Version 0.6</h3>

<p>Version 0.6 incorporates many changes from the previous version, both in bug fixes and new features. For details see <a href="http://wiki.habariproject.org/en/Releases/0.6" title="http://wiki.habariproject.org/en/Releases/0.6" rel="nofollow">the release notes</a>.
</p><p>Habari's upgrade process is designed to be transparent, with the only indication that an upgrade is happening being a slightly longer page load time the first time the site is visited after the software is updated.
</p><p>One major change that affects the upgrade process in this release is in how Habari stores it's configuration details. Habari 0.5.2 and earlier stored site configuration details in global variables. Habari 0.6 marks the move to using a config class, so the variables aren't globally available, a change that was made to improve security. These details are stored in the site's config.php file, which is located either in the root of the site's directory, or, for multisite users, in Habari's <tt>/user/sites/site_name directory</tt>. 
</p><p>For users who have left their config.php file writable, the necessary changes to the configuration file will be handled by the upgrade process transparently. For users who have made their configuration file read only, some manual changes will have to be made before the upgrade process can begin.
</p><p>
</p>
<h4>Manually Updating The Configuration File</h4>

<p>The config.php file for Habari version 0.5.2 and below looks like this:
</p><p><b>For MySQL</b>
</p>
<pre>
&lt;?php
$db_connection= array(
	'connection_string'=&gt;'mysql:host={$db_host};dbname={$db_schema}',
	'username'=&gt;'{$db_user}',
	'password'=&gt;'{$db_pass}',
	'prefix'=&gt;'{$table_prefix}'
);

?&gt;
</pre>
<p><b>For SQLite</b>
</p>
<pre>
&lt;?php
$db_connection= array(
	'connection_string'=&gt;'sqlite:{$db_file}',
	'username'=&gt;'',
	'password'=&gt;'',
	'prefix'=&gt;'{$table_prefix}'
);

?&gt;

</pre>
<p>With version 0.6 and forward the config file looks like this:
</p><p><b>For MySQL</b>
</p>
<pre>
&lt;?php
Config::set( 'db_connection', array(
	'connection_string'=&gt;'mysql:host={$db_host};dbname={$db_schema}',
	'username'=&gt;'{$db_user}',
	'password'=&gt;'{$db_pass}',
	'prefix'=&gt;'{$table_prefix}'
));

?&gt;
</pre>
<p><b>For SQLite</b>
</p>
<pre>

&lt;?php
Config::set( 'db_connection', array(
	'connection_string'=&gt;'sqlite:{$db_file}',
	'username'=&gt;'',
	'password'=&gt;'',
	'prefix'=&gt;'{$table_prefix}'
));

?&gt;
</pre>
<p>The easiest thing to do is, before upgrading, make the configuration file writable. Perform the upgrade, then make the file read only again.
</p><p>If you don't wish to do that, open the configuration file in a text editor and make the changes shown above, save your changes, then navigate to your site so the upgrade process can proceed.
</p>
<h3>Upgrading Other Versions of Habari</h3>
<p>For specific upgrade instructions for earlier versions of Habari, see the <a href="http://wiki.habariproject.org/en/Upgrading" title="Full Upgrade Instructions">full upgrade notes</a> on the wiki.</p>
</div>


</div>
</body>
</html>
